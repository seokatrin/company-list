(function(e){function t(t){for(var o,s,r=t[0],c=t[1],l=t[2],u=0,p=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},a={app:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/company-list/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"55d8":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),a={class:"app-wrapper"};function i(e,t,n,i,s,r){var c=Object(o["j"])("company-row"),l=Object(o["j"])("modal-window");return Object(o["h"])(),Object(o["d"])("div",a,[Object(o["e"])("button",{onClick:t[0]||(t[0]=function(e){return s.isModal=!0}),class:"btn btn-add"},"Добавить"),Object(o["e"])("table",null,[Object(o["e"])("thead",null,[(Object(o["h"])(!0),Object(o["d"])(o["a"],null,Object(o["i"])(s.thead,(function(e){return Object(o["h"])(),Object(o["d"])("td",{key:e},Object(o["k"])(e),1)})),128))]),(Object(o["h"])(!0),Object(o["d"])(o["a"],null,Object(o["i"])(s.companies,(function(e){return Object(o["h"])(),Object(o["c"])(c,{items:e,key:e.id,onDeleteCompany:r.deleteCompany,onEditAddress:r.editAddress},null,8,["items","onDeleteCompany","onEditAddress"])})),128))]),Object(o["n"])(Object(o["g"])(l,{titles:s.thead,onHandleModal:r.handleModal,onAddCompany:r.addCompany},null,8,["titles","onHandleModal","onAddCompany"]),[[o["m"],s.isModal]])])}n("4de4"),n("d3b7"),n("7db0");var s={class:"butons"};function r(e,t,n,a,i,r){var c=Object(o["j"])("form-input");return Object(o["h"])(),Object(o["d"])("div",{class:"modal-wrapper",onClick:t[4]||(t[4]=function(){return r.closeModal&&r.closeModal.apply(r,arguments)})},[Object(o["e"])("div",{class:"modal",onClick:t[3]||(t[3]=Object(o["o"])((function(){}),["stop"]))},[Object(o["e"])("button",{class:"delete-btn btn",onClick:t[0]||(t[0]=function(){return r.closeModal&&r.closeModal.apply(r,arguments)})},"X"),Object(o["e"])("form",null,[(Object(o["h"])(!0),Object(o["d"])(o["a"],null,Object(o["i"])(i.forms,(function(e,t){return Object(o["h"])(),Object(o["c"])(c,{modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},modelModifiers:{trim:!0},key:t,title:n.titles[t]},null,8,["modelValue","onUpdate:modelValue","title"])})),128)),Object(o["n"])(Object(o["e"])("p",{class:"error"},Object(o["k"])(i.message),513),[[o["m"],i.message]]),Object(o["e"])("div",s,[Object(o["e"])("button",{onClick:t[1]||(t[1]=Object(o["o"])((function(){return r.getCompany&&r.getCompany.apply(r,arguments)}),["prevent"])),class:"btn"},"Загрузить по ИНН"),Object(o["e"])("button",{onClick:t[2]||(t[2]=Object(o["o"])((function(){return r.addCompany&&r.addCompany.apply(r,arguments)}),["prevent"])),class:"btn"},"Добавить")])])])])}n("e9c4");var c={class:"lebel"},l=["value"];function d(e,t,n,a,i,s){return Object(o["h"])(),Object(o["d"])("div",null,[Object(o["e"])("label",c,[Object(o["f"])(Object(o["k"])(n.title)+" ",1),Object(o["e"])("input",{value:n.modelValue,onInput:t[0]||(t[0]=function(){return s.updateInput&&s.updateInput.apply(s,arguments)}),class:"input"},null,40,l)])])}n("a9e3");var u={name:"form-input",props:{title:String,modelValue:[String,Number]},methods:{updateInput:function(e){this.$emit("update:modelValue",e.target.value)}}},p=n("6b0d"),b=n.n(p);const f=b()(u,[["render",d]]);var m=f,h={name:"modal-window",components:{FormInput:m},props:{titles:Array},data:function(){return{isOpen:!0,message:"",forms:[{field:"name",value:""},{field:"address",value:""},{field:"ogrn",value:""},{field:"inn",value:""},{field:"date",value:""}]}},methods:{closeModal:function(){this.$emit("handleModal"),this.cleanModal()},addCompany:function(){if(this.checkFields()){for(var e={},t=0;t<this.forms.length;t++)e[this.forms[t].field]=this.forms[t].value;e.id=Date.now(),this.$emit("addCompany",e),this.closeModal()}},checkFields:function(){for(var e=0;e<this.forms.length;e++)if(""===this.forms[e].value)return this.message="Заполните все поля",!1;return!0},cleanModal:function(){for(var e=0;e<this.forms.length;e++)this.forms[e].value="";this.message=""},getCompany:function(){var e=this;if(""===this.forms[3].value)this.message="Заполните полe ИНН";else{this.message="";var t="https://suggestions.dadata.ru/suggestions/api/4_1/rs/findById/party",n="775cf923996c9d3acc8bce7766d73bbdeba73b24",o={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token "+n},body:JSON.stringify({query:this.forms[3].value,branch_type:"MAIN"})};fetch(t,o).then((function(e){return e.json()})).then((function(t){t=t.suggestions[0],e.forms[0].value=t.value,e.forms[1].value=t.data.address.value,e.forms[2].value=t.data.ogrn,e.forms[4].value=new Date(t.data.ogrn_date).toLocaleDateString()})).catch((function(t){e.message="Неверный ИНН",console.log("error",t)}))}}}};const j=b()(h,[["render",r]]);var O=j,v=(n("b0c0"),{key:0,class:"td-address"}),y=Object(o["e"])("img",{src:"https://img.icons8.com/ios-glyphs/30/000000/edit--v1.png"},null,-1),g=[y],k={key:1,class:"td-edit"},C=Object(o["e"])("img",{src:"https://img.icons8.com/material-outlined/24/000000/ok--v1.png"},null,-1),M=[C];function w(e,t,n,a,i,s){return Object(o["h"])(),Object(o["d"])("tr",null,[Object(o["e"])("td",null,Object(o["k"])(n.items.name),1),i.isEdit?(Object(o["h"])(),Object(o["d"])("td",k,[Object(o["n"])(Object(o["e"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.value=e}),ref:"input",class:"input-edit",onBlur:t[2]||(t[2]=function(e){return i.isEdit=!1})},null,544),[[o["l"],i.value]]),Object(o["e"])("div",null,[Object(o["e"])("button",{onClick:t[3]||(t[3]=function(){return s.saveEdit&&s.saveEdit.apply(s,arguments)}),class:"btn btn-small"},M),Object(o["e"])("button",{onClick:t[4]||(t[4]=function(e){return i.isEdit=!1}),class:"btn btn-small"},"X")])])):(Object(o["h"])(),Object(o["d"])("td",v,[Object(o["f"])(Object(o["k"])(n.items.address),1),Object(o["e"])("button",{onClick:t[0]||(t[0]=function(e){return i.isEdit=!0}),class:"btn btn-edit"},g)])),Object(o["e"])("td",null,Object(o["k"])(n.items.ogrn),1),Object(o["e"])("td",null,Object(o["k"])(n.items.inn),1),Object(o["e"])("td",null,Object(o["k"])(n.items.date),1),Object(o["e"])("td",null,[Object(o["e"])("button",{onClick:t[5]||(t[5]=function(t){return e.$emit("deleteCompany",n.items.id)}),class:"btn btn-small"}," X ")])])}var A={name:"company-row",props:{items:Array},data:function(){return{isEdit:!1,value:this.items.address}},methods:{saveEdit:function(){this.$emit("editAddress",this.value,this.items.id),this.isEdit=!1}},watch:{isEdit:function(e){var t=this;e&&this.$nextTick((function(){return t.$refs.input.focus()}))}}};const E=b()(A,[["render",w]]);var S=E,_={name:"App",components:{ModalWindow:O,CompanyRow:S},data:function(){return{isModal:!1,thead:["Наименование","Адрес","ОГРН","ИНН","Дата регистрации","Удалить"],companies:[]}},methods:{handleModal:function(){this.isModal=!1},addCompany:function(e){this.companies.push(e)},deleteCompany:function(e){this.companies=this.companies.filter((function(t){return t.id!==e}))},editAddress:function(e,t){var n=this.companies.find((function(e){return e.id===t}));n.address=e}}};n("a967");const P=b()(_,[["render",i]]);var V=P;Object(o["b"])(V).mount("#app")},a967:function(e,t,n){"use strict";n("55d8")}});
//# sourceMappingURL=app.7fa3fd9f.js.map